---
---
<section class="bg-white border-2 border-brand rounded-3xl p-6 shadow-md shadow-brand/5 relative overflow-hidden mb-8">
    <div class="absolute top-0 right-0 w-32 h-32 bg-brand/5 rounded-full -mr-16 -mt-16 pointer-events-none"></div>

    <form class="flex flex-col md:flex-row gap-6 items-end relative z-10" id="quick-client-form">
        <div class="flex-1 w-full">
            <div class="flex items-center gap-2 mb-1.5 ml-1">
                <span class="text-brand text-xs">ğŸ‘¤</span>
                <label class="block text-[11px] uppercase font-black text-brand tracking-widest">
                    Nombre del Cliente
                </label>
            </div>
            <input 
                type="text" 
                name="nombre" 
                required 
                class="w-full bg-brand/5 border-2 border-brand/10 rounded-2xl px-4 py-4 text-brand-deep placeholder:text-brand/40 outline-none focus:border-brand focus:bg-white transition-all font-bold" 
                placeholder="Ej: Transportes LogÃ­sticos S.A."
            />
        </div>

        <div class="flex-[2] w-full">
            <div class="flex items-center gap-2 mb-1.5 ml-1">
                <span class="text-brand text-xs">ğŸ“</span>
                <label class="block text-[11px] uppercase font-black text-brand tracking-widest">
                    Observaciones
                </label>
            </div>
            <input 
                type="text" 
                name="observaciones" 
                class="w-full bg-brand/5 border-2 border-brand/10 rounded-2xl px-4 py-4 text-brand-deep placeholder:text-brand/40 outline-none focus:border-brand focus:bg-white transition-all text-sm" 
                placeholder="Notas, direcciÃ³n o contactos..."
            />
        </div>

        <button 
            type="submit" 
            class="w-full md:w-auto bg-brand text-white font-black px-10 py-4 rounded-2xl hover:bg-brand-deep hover:shadow-xl hover:shadow-brand/30 active:scale-95 transition-all flex items-center justify-center gap-3 group"
        >
            <span class="uppercase tracking-tighter">AÃ±adir</span>
            <span class="text-2xl group-hover:rotate-90 transition-transform">+</span>
        </button>
    </form>
</section>

<script>
    import { actions } from 'astro:actions';
    
    function initForm() {
        const form = document.getElementById('quick-client-form') as HTMLFormElement;
        if (!form) return;

        form.onsubmit = async (e) => {
            e.preventDefault();
            const { error } = await actions.upsertClient(new FormData(form));
            if (!error) window.location.reload();
        };
    }

    initForm();
    document.addEventListener('astro:after-navigation', initForm);
</script>